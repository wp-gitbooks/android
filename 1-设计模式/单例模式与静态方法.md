# 问题
## 什么情况下需要用单例而不使用静态方法？ 
1.  如果你的单例类并没有保存任何状态性质的**属性**，而只是提供了一些公共方法，那么就应该考虑包含静态方法的类，因为 Java 在编译期的静态绑定特性，静态方法比单例类要快很多。但是请记住，在静态类中维护状态并不是一种推荐的做法，尤其是在并发执行的环境中，因为在多线程运行修改静态变量的状态时，如果不能正确地处理线程之间的关系，这可能会导致由于条件竞争而出现莫名其妙的问题。

2.  另外，当你需要把一系列的 `util` 方法放到一个类当中时，应该用静态方法；除此之外，当你希望只对外提供一种资源访问的方式，那么就应该使用单例模式

## 你能用静态类(static class)来代替单例模式吗？
单例类最主要的优点就是，单例模式面向对象的特性更强一些。在使用单模式的时候，你可以通过继承来实现多态，也可以通过实现接口来提供同一接口的不同实现。 比如j`java.lang.Runtime`, 他就是一个单例类，当调用 **getRuntime()** 的时候，不同的 JVM 中可以返回不同的实现对象，同时又可以保证在 JVM 中只存在一份实例。如果我们把`java.lang.Runtime`定义为一个静态类就不可能实现在不同 JVM 中返回不同实现的行为。

上面就是关于单例类和静态类的区别。当你需要一个具有面向对象特性的类的时候，就用单例模式；而如果你只是把一些静态方法放到一个类中，那就用静态类。



## 单例同静态方法他们之间有什么区别？
> 这是我们的第二个关于单例和静态之间关系的问题。我之前说过，他们之间最本质的区别就是，一个代表对象，而另一个代表方法。下面是 Java 当中二者之间的其他不同之处。

1.  静态类比单例模式的**效率**更高，因为静态方法在编译期就完成了静态绑定。
2.  另外一个区别就是，是否支持覆写 `（override）`。因为 `Java` 中的静态方法是不能被覆写的，这就导致某些情况不够灵活。而你随时可以继承一个非 `final` 的单例类来覆写其中的方法。
3.  在做单元测试的时候，静态类比单例类更难被 `mock`，因此也更难被测试。而单例类很容易被 mock 来执行单元测试。在使用 `Junit` 的时候，你可以更简单地为构造方法或普通方法传入单例类的 mock 对象来执行测试用例。
4.  如果你需要维护一些状态信息，那么单例比静态类更合适。因为在静态类中维护状态信息很容易导致细微的 bug 。
5.  单例对象可以被延迟**初始化**。而静态类总是在类被加载的时候就初始化。
6.  很多依赖注入的框架很好的处理了单例对象，比如在 Spring 中实现一个单例对象就很简单。 以上就是关于静态类和单例类之间的区别。了解这些会有助于你决定在何时使用何种方式来完成你的工作。



# 静态方法
静态方法中产生的对象，会随着静态方法执行完毕而释放掉，而且执行类中的静态方法时，不会实例化静态方法所在的类。

# 单例模式
单例模式比静态方法有很多优势：  
首先，单例可以继承类，实现接口，而静态类不能（可以集成类，但不能集成实例成员）；  
其次，单例可以被延迟初始化，静态类一般在第一次加载是初始化；  
再次，单例类可以被集成，他的方法可以被覆写；

# 区别
有时候我们对静态方法和实例化方法会有一些误解。
1、大家都以为“ 静态方法常驻内存，实例方法不是，所以静态方法效率高但占内存。”
事实上，他们都是一样的，在加载时机和占用内存上，静态方法和实例方法是一样的，在类型第一次被使用时加载。调用的速度基本上没有差别。
2、大家都以为“ 静态方法在堆上分配内存，实例方法在堆栈上”
事实上所有的方法都不可能在堆或者堆栈上分配内存，方法作为代码是被加载到特殊的代码内存区域，这个内存区域是不可写的。
方法占不占用更多内存，和它是不是static没什么关系。 
因为字段是用来存储每个实例对象的信息的，所以字段会占有内存，并且因为每个实例对象的状态都不一致（至少不能认为它们是一致的），所以每个实例对象的所以字段都会在内存中有一分拷贝，也因为这样你才能用它们来区分你现在操作的是哪个对象。 
但方法不一样，不论有多少个实例对象，它的方法的代码都是一样的，所以只要有一份代码就够了。因此无论是static还是non-static的方法，都只存在一份代码，也就是只占用一份内存空间。 
同样的代码，为什么运行起来表现却不一样？这就依赖于方法所用的数据了。主要有两种数据来源，一种就是通过方法的参数传进来，另一种就是使用class的成员变量的值……

3、大家都以为“实例方法需要先创建实例才可以调用，比较麻烦，静态方法不用，比较简单”
事实上如果一个方法与他所在类的实例对象无关，那么它就应该是静态的，而不应该把它写成实例方法。所以所有的实例方法都与实例有关，既然与实例有关，那么创建实例就是必然的步骤，没有麻烦简单一说。
当然你完全可以把所有的实例方法都写成静态的，将实例作为参数传入即可，一般情况下可能不会出什么问题。
从面向对象的角度上来说，在抉择使用实例化方法或静态方法时，应该根据是否该方法和实例化对象具有逻辑上的相关性，如果是就应该使用实例化对象 反之使用静态方法。这只是从面向对象角度上来说的。
如果从线程安全、性能、兼容性上来看 也是选用实例化方法为宜。
我们为什么要把方法区分为：静态方法和实例化方法 ？
如果我们继续深入研究的话，就要脱离技术谈理论了。早期的结构化编程，几乎所有的方法都是“静态方法”，引入实例化方法概念是面向对象概念出现以后的事情了，区分静态方法和实例化方法不能单单从性能上去理解，创建c++,java,c#这样面向对象语言的大师引入实例化方法一定不是要解决什么性能、内存的问题，而是为了让开发更加模式化、面向对象化。这样说的话，静态方法和实例化方式的区分是为了解决模式的问题。

# 参考
https://qifanyang.com/2020/02/29/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8FVS%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95/

https://blog.csdn.net/yuzhiqiang666/article/details/11969015
