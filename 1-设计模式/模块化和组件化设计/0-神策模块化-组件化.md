---
number headings: auto, first-level 1, max 6, 1.1
---

# 1 线索
历史背景、如何改造、重构  https://mp.weixin.qq.com/s/p6Rr5eZ9ut-i7gaq2yEm2g


# 2 框架
![image.png](https://cdn.jsdelivr.net/gh/wp3355168/Typora-Picgo-Gitee/img/202303210957632.png)

![image.png](https://cdn.jsdelivr.net/gh/wp3355168/Typora-Picgo-Gitee/img/202303210955952.png)

## 2.1 基础库

### 2.1.1 基础工具类
Activity生命周期监控、工具类等

应用信息、屏幕信息、反射工具类、字符串工具类、Base64 工具类等

日志输出

### 2.1.2 网络
网络 get、post 请求

### 2.1.3 线程管理



### 2.1.4 数据存储
数据库、SP、文件基础结构


## 2.2 核心
基础代码接口:SensorsDataAPI 接口 H5 打通  
异常监听  
Activity 监听

远程配置


## 2.3 业务
可视化全埋点/点击图 全埋点  
推送点击  
加密

通过根据需求进行组合，可以形成类似下面的产品组合形式:

全埋点 + 核心库 SDK:包含基础代码埋点和全埋点功能 推送点击 + 核心库 SDK:包含推送点击和代码埋点功能



# 3 模块管理

## 3.1 模块关系

### 3.1.1 模块和组件关系
![image.png](https://cdn.jsdelivr.net/gh/wp3355168/Typora-Picgo-Gitee/img/202303211015608.png)

![image.png](https://cdn.jsdelivr.net/gh/wp3355168/Typora-Picgo-Gitee/img/202303211013430.png)

### 3.1.2 模块间关系
![image.png](https://cdn.jsdelivr.net/gh/wp3355168/Typora-Picgo-Gitee/img/202303211016052.png)



## 3.2 模块通信
### 3.2.1 模块协议
![image.png](https://cdn.jsdelivr.net/gh/wp3355168/Typora-Picgo-Gitee/img/202303211017665.png)



![image.png](https://cdn.jsdelivr.net/gh/wp3355168/Typora-Picgo-Gitee/img/202303211003734.png)

### 3.2.2 模块管理
![image.png](https://cdn.jsdelivr.net/gh/wp3355168/Typora-Picgo-Gitee/img/202303211003977.png)


# 4 打包和发布
![image.png](https://cdn.jsdelivr.net/gh/wp3355168/Typora-Picgo-Gitee/img/202303211003854.png)
